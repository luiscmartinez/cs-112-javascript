<!DOCTYPE html>
<html lang="en">

<head>
	<title>Huskies Computer Club Fundraising Shop</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>
	<div id="overlay"></div>
	<header>
		<a href="index.html" class="nav-left"> <img src="../images/computer-club-logo.png"
				alt="webstie logo - image of a dog" /> </a>
		<h1>The Huskies Fundraising Shop</h1>
		<a href="cart.html" class="nav-right">
			<div> <img src="../images/shopping-cart-logo.png" alt="shopping cart symbol" /> </div>
		</a>
	</header>
	<main>
		<div id="items">
		</div>
	</main>
	<div id="rightPanel" class="hidden">This is a hidden panel!</div>
	<footer>
		<a href="https://www.instagram.com/huskiescomputerclub" target="_blank">Instagram</a>
		<a href="/">Huskies Computer Club</a>
	</footer>
	<script>
		// Example JSON Data
		const jsonData = {
			"items": [
				{
					"id": 1,
					"name": "Item 1",
					"description": "Description of Item 1",
					"price": 9.99,
					"image": "beef.jpg",
				},
				{
					"id": 2,
					"name": "Item 2",
					"description": "Description of Item 2",
					"price": 19.99,
					"image": "cake.jpg"
				},
				{
					"id": 3,
					"name": "Item 3",
					"description": "Description of Item 3",
					"price": 2.99,
					"image": "jello.png",
					"options": {
						"flavor": ["Lemon", "Grape", "Cherry"],
						"size": ["small", "med", "large"]
					}
				}
				, {
					"id": 4,
					"name": "Item 4",
					"description": "Description of Item 4",
					"price": 29.99,
					"image": "meat-dish.png"
				},
				{
					"id": 5,
					"name": "Item 5",
					"description": "Description of Item 5",
					"price": 5.99,
					"image": "pizza.jpg"
				}
			]
		};

		$(document).ready(function () {
			const $container = $("#items")
			$container.empty()
			const $rightPanel = $('#rightPanel')
			const $overlay = $('#overlay');

			// Function to render items
			jsonData.items.forEach((item, i) => {
				const itemContent = `
            <img id=${item.id} src="../images/${item.image}" alt="${item.name}" style="max-width: 300px; height: 200px;">
            <h2>${item.name}</h2>
            <p>${item.description}</p>
            <p>Price: $${item.price}</p>
        `;
				let btn = `<button class="add-to-cart" data-id="${item.id}">Add To Cart</button>`
				if (item?.options) {
					btn = `<button class="toggleButton" data-id="${item.id}">Add To Cart</button>`
				}
				$('<div/>', {
					'class': 'item',
					html: itemContent + btn
				}).appendTo($container);

				$(document).on('click', `.add-to-cart[data-id='${item.id}']`, function () {
					const itemId = $(this).data('id');
					console.log('Item clicked:', itemId);
					//! You can add more logic here to handle the click event
				});
				$(document).on('click', `.toggleButton[data-id='${item.id}']`, function () {
					const itemId = $(this).data('id');
					console.log('Item wid options got clicked:', itemId, item);
					//! You can add more logic here to handle the click event
					$rightPanel.slideToggle();
					$overlay.fadeIn();
					// const formContent = ""
					// const itemOptions = item.options
					// for (let key in itemOptions) {
					// 	if (itemOptions.hasOwnProperty(key)) {
					// 		const optionName = key
					// 		const optionValues = itemOptions[key]
					// 		const optionContent = `
					// 		<div> 
					// 			<h3>${key}</h3>
					// 			${optionValues.map((optionValue) => {
					// 				return (
					// 					`
					// 					<input type="radio" id="${key+optionValue}" name="${optionValue}" value="${optionValue}">
					// 					<label for="${key+optionValue}">${optionValue}</label><br>
					// 					`
					// 				)
					// 			})}
					// 		</div>`
					// 	}
					// }
					
					// $('<form/>', {
					// 	'id' :'optionsForm',
					// 	html: "<p>Additional Content</p>"

					// }).append($rightPanel)

					// $rightPanel.html(panelContent);

				});
			})

			// on hover change pizza img
			$(function () {
				$('#5').hover(function () {
					$('#5').attr('src', '../images/pizza-2.jpg')
				},
					function () {
						$('#5').attr('src', "../images/pizza.jpg")
					}
				)
			})

			// show panel
			$overlay.click(function () {
				// $rightPanel.animate({ right: '-200px' }, 500);
				$overlay.fadeOut();
			});

			$(document).click(function (event) {
				// Check if the click is outside the panel and if the panel is visible
				if (!$(event.target).closest('#rightPanel, .toggleButton').length && $rightPanel.is(':visible')) {
					$rightPanel.slideUp();
					// $rightPanel.animate({ right: '-200px' }, 500);
					$overlay.fadeOut();
				}
			});
		})

	</script>
</body>

</html>